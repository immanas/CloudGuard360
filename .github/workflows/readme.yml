name: README Validation & Auto Update

on:
  push:
    paths:
      - "README.md"
  schedule:
    - cron: "0 0 * * 0"  # runs every Sunday

jobs:
  readme-check:
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ“¥ Checkout Repo
      uses: actions/checkout@v3

    # âœ… Check README exists
    - name: ğŸ” Check README exists
      run: |
        if [ ! -f README.md ]; then
          echo "âŒ README.md not found!"
          exit 1
        fi

    # âœ… Check README is not empty
    - name: ğŸ“ Validate README content
      run: |
        if [ ! -s README.md ]; then
          echo "âŒ README.md is empty!"
          exit 1
        fi

    # ğŸ•’ Auto update "Last Updated" section (optional but strong)
    - name: ğŸ•’ Update README timestamp
      run: |
        DATE=$(date)
        echo "Last Updated: $DATE" > temp.txt
        cat README.md >> temp.txt
        mv temp.txt README.md

    # ğŸ” Commit changes (only if modified)
    - name: ğŸ”„ Commit README changes
      run: |
        git config --global user.name "github-actions"
        git config --global user.email "actions@github.com"
        git add README.md
        git diff --cached --quiet || git commit -m "ğŸ”„ Auto-update README timestamp"
        git push
